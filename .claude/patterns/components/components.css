/**
 * Component Library Styles
 * Atomic UI components using data-attribute selectors
 */

@layer reset, tokens, components;

/* ============================================
   Design Tokens
   ============================================ */
@layer tokens {
  :root {
    /* Colors */
    --primary: oklch(0.55 0.2 250);
    --primary-hover: oklch(0.45 0.2 250);
    --success: oklch(0.6 0.15 145);
    --warning: oklch(0.75 0.15 85);
    --error: oklch(0.55 0.2 25);
    --info: oklch(0.6 0.15 230);

    --text: oklch(0.2 0.02 250);
    --text-muted: oklch(0.45 0.02 250);
    --text-inverted: oklch(0.98 0 0);

    --surface: oklch(1 0 0);
    --surface-alt: oklch(0.97 0.005 250);
    --border: oklch(0.88 0.01 250);
    --border-focus: var(--primary);

    /* Spacing */
    --spacing-xs: 0.25rem;
    --spacing-sm: 0.5rem;
    --spacing-md: 1rem;
    --spacing-lg: 1.5rem;
    --spacing-xl: 2rem;
    --spacing-2xl: 3rem;

    /* Typography */
    --font-family: system-ui, -apple-system, sans-serif;
    --font-size-xs: 0.75rem;
    --font-size-sm: 0.875rem;
    --font-size-base: 1rem;
    --font-size-lg: 1.125rem;
    --font-size-xl: 1.25rem;
    --font-size-2xl: 1.5rem;
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;

    /* Radii */
    --radius-sm: 0.25rem;
    --radius-md: 0.375rem;
    --radius-lg: 0.5rem;
    --radius-xl: 0.75rem;
    --radius-full: 9999px;

    /* Shadows */
    --shadow-sm: 0 1px 2px oklch(0 0 0 / 0.05);
    --shadow-md: 0 4px 6px oklch(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px oklch(0 0 0 / 0.1);

    /* Transitions */
    --transition-fast: 150ms ease;
    --transition-normal: 200ms ease;

    /* Component-specific tokens */
    --focus-ring: var(--primary);
    --focus-ring-width: 2px;
    --focus-ring-offset: 2px;

    /* Avatar sizes */
    --avatar-size-xs: 1.5rem;
    --avatar-size-sm: 2rem;
    --avatar-size-md: 2.5rem;
    --avatar-size-lg: 3rem;
    --avatar-size-xl: 4rem;

    /* Spinner sizes */
    --spinner-size-sm: 1rem;
    --spinner-size-md: 1.5rem;
    --spinner-size-lg: 2rem;
  }
}

/* ============================================
   Components
   ============================================ */
@layer components {

  /* --------------------------------------------
     Button Component
     Usage: <button data-button="primary">
     -------------------------------------------- */
  [data-button] {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-sm) var(--spacing-lg);
    font-family: var(--font-family);
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    line-height: 1.5;
    text-decoration: none;
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: background var(--transition-fast),
                border-color var(--transition-fast),
                box-shadow var(--transition-fast);

    &:focus-visible {
      outline: var(--focus-ring-width) solid var(--focus-ring);
      outline-offset: var(--focus-ring-offset);
    }

    &:disabled,
    &[aria-disabled="true"] {
      opacity: 0.5;
      cursor: not-allowed;
      pointer-events: none;
    }

    &[data-loading] {
      position: relative;
      pointer-events: none;
    }
  }

  /* Button: Primary */
  [data-button="primary"] {
    background: var(--primary);
    color: var(--text-inverted);
    border: 1px solid var(--primary);

    &:hover {
      background: var(--primary-hover);
      border-color: var(--primary-hover);
    }

    &:active {
      transform: translateY(1px);
    }
  }

  /* Button: Secondary */
  [data-button="secondary"] {
    background: var(--surface);
    color: var(--text);
    border: 1px solid var(--border);

    &:hover {
      background: var(--surface-alt);
      border-color: var(--text-muted);
    }
  }

  /* Button: Ghost */
  [data-button="ghost"] {
    background: transparent;
    color: var(--text);
    border: 1px solid transparent;

    &:hover {
      background: var(--surface-alt);
    }
  }

  /* Button: Danger */
  [data-button="danger"] {
    background: var(--error);
    color: var(--text-inverted);
    border: 1px solid var(--error);

    &:hover {
      background: oklch(from var(--error) calc(l - 0.1) c h);
    }
  }

  /* Button Sizes */
  [data-button][data-size="small"] {
    padding: var(--spacing-xs) var(--spacing-md);
    font-size: var(--font-size-xs);
  }

  [data-button][data-size="large"] {
    padding: var(--spacing-md) var(--spacing-xl);
    font-size: var(--font-size-base);
  }

  /* Button: Icon Only */
  [data-button][data-icon-only] {
    padding: var(--spacing-sm);
    aspect-ratio: 1;
  }

  /* Button: Full Width */
  [data-button][data-full-width] {
    width: 100%;
  }

  /* --------------------------------------------
     Link Component
     Usage: <a href="/" data-link="nav">
     -------------------------------------------- */
  [data-link] {
    color: var(--primary);
    text-decoration: underline;
    text-underline-offset: 0.2em;
    transition: color var(--transition-fast);

    &:hover {
      color: var(--primary-hover);
    }

    &:focus-visible {
      outline: var(--focus-ring-width) solid var(--focus-ring);
      outline-offset: var(--focus-ring-offset);
      border-radius: var(--radius-sm);
    }
  }

  [data-link="nav"] {
    color: var(--text-muted);
    text-decoration: none;

    &:hover,
    &[aria-current] {
      color: var(--text);
    }

    &[aria-current="page"] {
      font-weight: var(--font-weight-medium);
    }
  }

  [data-link="subtle"] {
    color: var(--text-muted);
    text-decoration: none;

    &:hover {
      color: var(--text);
      text-decoration: underline;
    }
  }

  [data-link="external"]::after {
    content: " â†—";
    font-size: 0.8em;
  }

  /* --------------------------------------------
     Badge Component
     Usage: <status-badge data-type="success">
     -------------------------------------------- */
  status-badge,
  [data-badge] {
    display: inline-flex;
    align-items: center;
    gap: var(--spacing-xs);
    padding: var(--spacing-xs) var(--spacing-sm);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-medium);
    line-height: 1;
    border-radius: var(--radius-full);
    background: var(--surface-alt);
    color: var(--text);
  }

  status-badge[data-type="success"],
  [data-badge="success"] {
    background: oklch(from var(--success) l c h / 0.15);
    color: oklch(from var(--success) calc(l - 0.2) c h);
  }

  status-badge[data-type="warning"],
  [data-badge="warning"] {
    background: oklch(from var(--warning) l c h / 0.15);
    color: oklch(from var(--warning) calc(l - 0.3) c h);
  }

  status-badge[data-type="error"],
  [data-badge="error"] {
    background: oklch(from var(--error) l c h / 0.15);
    color: oklch(from var(--error) calc(l - 0.1) c h);
  }

  status-badge[data-type="info"],
  [data-badge="info"] {
    background: oklch(from var(--info) l c h / 0.15);
    color: oklch(from var(--info) calc(l - 0.2) c h);
  }

  /* Badge with dot */
  status-badge[data-dot]::before,
  [data-badge][data-dot]::before {
    content: "";
    width: 0.5rem;
    height: 0.5rem;
    border-radius: 50%;
    background: currentColor;
  }

  /* Badge sizes */
  status-badge[data-size="small"],
  [data-badge][data-size="small"] {
    padding: 0.125rem var(--spacing-xs);
    font-size: 0.625rem;
  }

  status-badge[data-size="large"],
  [data-badge][data-size="large"] {
    padding: var(--spacing-sm) var(--spacing-md);
    font-size: var(--font-size-sm);
  }

  /* --------------------------------------------
     Avatar Component
     Usage: <user-avatar data-size="md">
     -------------------------------------------- */
  user-avatar {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: var(--avatar-size-md);
    height: var(--avatar-size-md);
    border-radius: 50%;
    background: var(--primary);
    color: var(--text-inverted);
    font-weight: var(--font-weight-semibold);
    font-size: calc(var(--avatar-size-md) * 0.4);
    overflow: hidden;
    flex-shrink: 0;

    & img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: inherit;
    }
  }

  user-avatar[data-size="xs"] {
    width: var(--avatar-size-xs);
    height: var(--avatar-size-xs);
    font-size: calc(var(--avatar-size-xs) * 0.4);
  }

  user-avatar[data-size="sm"] {
    width: var(--avatar-size-sm);
    height: var(--avatar-size-sm);
    font-size: calc(var(--avatar-size-sm) * 0.4);
  }

  user-avatar[data-size="lg"] {
    width: var(--avatar-size-lg);
    height: var(--avatar-size-lg);
    font-size: calc(var(--avatar-size-lg) * 0.4);
  }

  user-avatar[data-size="xl"] {
    width: var(--avatar-size-xl);
    height: var(--avatar-size-xl);
    font-size: calc(var(--avatar-size-xl) * 0.4);
  }

  user-avatar[data-shape="square"] {
    border-radius: var(--radius-md);
  }

  /* Avatar with status indicator */
  user-avatar[data-status] {
    position: relative;
    overflow: visible;

    &::after {
      content: "";
      position: absolute;
      bottom: 0;
      right: 0;
      width: 25%;
      height: 25%;
      border-radius: 50%;
      border: 2px solid var(--surface);
      background: var(--text-muted);
      z-index: 1;
    }
  }

  user-avatar[data-status="online"]::after {
    background: var(--success);
  }

  user-avatar[data-status="away"]::after {
    background: var(--warning);
  }

  user-avatar[data-status="busy"]::after {
    background: var(--error);
  }

  /* --------------------------------------------
     Tag/Chip Component
     Usage: <tag-item>CSS</tag-item>
     -------------------------------------------- */
  tag-item {
    display: inline-flex;
    align-items: center;
    gap: var(--spacing-xs);
    padding: var(--spacing-xs) var(--spacing-sm);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-medium);
    background: var(--surface-alt);
    color: var(--text);
    border-radius: var(--radius-md);
    border: 1px solid var(--border);
  }

  tag-item[data-size="small"] {
    padding: 0.125rem var(--spacing-xs);
    font-size: 0.625rem;
  }

  tag-item[data-size="large"] {
    padding: var(--spacing-sm) var(--spacing-md);
    font-size: var(--font-size-sm);
  }

  tag-item [data-remove] {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 1rem;
    height: 1rem;
    padding: 0;
    margin-left: var(--spacing-xs);
    background: transparent;
    border: none;
    border-radius: 50%;
    color: var(--text-muted);
    cursor: pointer;
    transition: background var(--transition-fast), color var(--transition-fast);

    &:hover {
      background: var(--error);
      color: var(--text-inverted);
    }
  }

  /* --------------------------------------------
     Spinner Component
     Usage: <loading-spinner data-size="md">
     -------------------------------------------- */
  loading-spinner {
    display: inline-block;
    width: var(--spinner-size-md);
    height: var(--spinner-size-md);
    border: 2px solid var(--border);
    border-top-color: var(--primary);
    border-radius: 50%;
    animation: spinner-rotate 0.8s linear infinite;
  }

  loading-spinner[data-size="small"] {
    width: var(--spinner-size-sm);
    height: var(--spinner-size-sm);
  }

  loading-spinner[data-size="large"] {
    width: var(--spinner-size-lg);
    height: var(--spinner-size-lg);
  }

  loading-spinner[data-color="current"] {
    border-color: currentColor;
    border-top-color: transparent;
    opacity: 0.3;

    &::before {
      content: "";
      position: absolute;
      inset: -2px;
      border: 2px solid transparent;
      border-top-color: currentColor;
      border-radius: 50%;
    }
  }

  @keyframes spinner-rotate {
    to {
      transform: rotate(360deg);
    }
  }

  /* --------------------------------------------
     Progress Bar Component
     Usage: <progress-bar><progress value="50" max="100">
     -------------------------------------------- */
  progress-bar {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
  }

  progress-bar label {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--text);
  }

  progress-bar progress {
    width: 100%;
    height: 0.5rem;
    border: none;
    border-radius: var(--radius-full);
    background: var(--surface-alt);

    &::-webkit-progress-bar {
      background: var(--surface-alt);
      border-radius: var(--radius-full);
    }

    &::-webkit-progress-value {
      background: var(--primary);
      border-radius: var(--radius-full);
      transition: width var(--transition-normal);
    }

    &::-moz-progress-bar {
      background: var(--primary);
      border-radius: var(--radius-full);
    }
  }

  progress-bar[data-color="success"] progress::-webkit-progress-value {
    background: var(--success);
  }

  progress-bar[data-color="warning"] progress::-webkit-progress-value {
    background: var(--warning);
  }

  progress-bar[data-color="error"] progress::-webkit-progress-value {
    background: var(--error);
  }

  progress-bar [data-value] {
    font-size: var(--font-size-sm);
    color: var(--text-muted);
  }

  /* --------------------------------------------
     Tabs Component
     Usage: <tab-group>
     -------------------------------------------- */
  tab-group {
    display: block;
  }

  tab-group [data-tablist] {
    display: flex;
    gap: var(--spacing-lg);
    border-bottom: 1px solid var(--border);
    margin-bottom: var(--spacing-lg);
  }

  tab-group [role="tab"] {
    padding: var(--spacing-md) 0;
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--text-muted);
    background: none;
    border: none;
    border-bottom: 2px solid transparent;
    cursor: pointer;
    transition: color var(--transition-fast), border-color var(--transition-fast);
    margin-bottom: -1px;

    &:hover {
      color: var(--text);
    }

    &[aria-selected="true"] {
      color: var(--text);
      border-bottom-color: var(--primary);
    }

    &:focus-visible {
      outline: var(--focus-ring-width) solid var(--focus-ring);
      outline-offset: var(--focus-ring-offset);
      border-radius: var(--radius-sm);
    }
  }

  tab-group [role="tabpanel"] {
    &[hidden] {
      display: none;
    }
  }

  /* Tabs: Pills style */
  tab-group[data-style="pills"] [data-tablist] {
    gap: var(--spacing-sm);
    border-bottom: none;
    background: var(--surface-alt);
    padding: var(--spacing-xs);
    border-radius: var(--radius-lg);
    width: fit-content;
  }

  tab-group[data-style="pills"] [role="tab"] {
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--radius-md);
    border-bottom: none;
    margin-bottom: 0;

    &[aria-selected="true"] {
      background: var(--surface);
      box-shadow: var(--shadow-sm);
    }
  }

  /* --------------------------------------------
     Pagination Component
     Usage: <nav-pagination>
     -------------------------------------------- */
  nav-pagination {
    display: block;
  }

  nav-pagination nav {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
  }

  nav-pagination a,
  nav-pagination button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 2.5rem;
    height: 2.5rem;
    padding: var(--spacing-sm);
    font-size: var(--font-size-sm);
    color: var(--text);
    text-decoration: none;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: background var(--transition-fast), border-color var(--transition-fast);

    &:hover:not([aria-current]):not(:disabled) {
      background: var(--surface-alt);
      border-color: var(--text-muted);
    }

    &[aria-current="page"] {
      background: var(--primary);
      border-color: var(--primary);
      color: var(--text-inverted);
    }

    &:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    &:focus-visible {
      outline: var(--focus-ring-width) solid var(--focus-ring);
      outline-offset: var(--focus-ring-offset);
    }
  }

  nav-pagination [data-page="prev"],
  nav-pagination [data-page="next"] {
    font-weight: var(--font-weight-medium);
  }

  /* --------------------------------------------
     Toggle/Switch Component
     Usage: <form-field data-type="toggle">
     -------------------------------------------- */
  [data-type="toggle"] {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
  }

  [data-type="toggle"] label {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    cursor: pointer;
  }

  [data-type="toggle"] input[type="checkbox"] {
    position: absolute;
    opacity: 0;
    width: 0;
    height: 0;
  }

  [data-toggle-track] {
    position: relative;
    width: 2.75rem;
    height: 1.5rem;
    background: var(--border);
    border-radius: var(--radius-full);
    transition: background var(--transition-fast);
  }

  [data-toggle-thumb] {
    position: absolute;
    top: 0.25rem;
    left: 0.25rem;
    width: 1rem;
    height: 1rem;
    background: var(--surface);
    border-radius: 50%;
    transition: transform var(--transition-fast);
    box-shadow: var(--shadow-sm);
  }

  [data-type="toggle"] input:checked + [data-toggle-track] {
    background: var(--primary);
  }

  [data-type="toggle"] input:checked + [data-toggle-track] [data-toggle-thumb] {
    transform: translateX(1.25rem);
  }

  [data-type="toggle"] input:focus-visible + [data-toggle-track] {
    outline: var(--focus-ring-width) solid var(--focus-ring);
    outline-offset: var(--focus-ring-offset);
  }

  [data-type="toggle"] input:disabled + [data-toggle-track] {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* --------------------------------------------
     Form Field Component
     Usage: <form-field>
     -------------------------------------------- */
  form-field {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
    margin-bottom: var(--spacing-md);
  }

  form-field label:first-child,
  form-field .form-label {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--text);
  }

  form-field input:not([type="checkbox"]):not([type="radio"]),
  form-field select,
  form-field textarea,
  .form-input,
  .form-select,
  .form-textarea {
    width: 100%;
    padding: var(--spacing-sm) var(--spacing-md);
    font-family: var(--font-family);
    font-size: var(--font-size-sm);
    color: var(--text);
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    transition: border-color var(--transition-fast), box-shadow var(--transition-fast);

    &::placeholder {
      color: var(--text-muted);
    }

    &:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px oklch(from var(--primary) l c h / 0.15);
    }

    &:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      background: var(--surface-alt);
    }
  }

  /* Validation states (CSS-only) */
  form-field input:user-valid:not(:placeholder-shown),
  form-field select:user-valid,
  form-field textarea:user-valid:not(:placeholder-shown) {
    border-color: var(--success);
  }

  form-field input:user-invalid:not(:placeholder-shown),
  form-field select:user-invalid,
  form-field textarea:user-invalid:not(:placeholder-shown) {
    border-color: var(--error);
  }

  form-field output,
  .form-help {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
  }

  form-field input:user-invalid:not(:placeholder-shown) ~ output,
  form-field select:user-invalid ~ output,
  form-field textarea:user-invalid:not(:placeholder-shown) ~ output {
    color: var(--error);
  }

  /* Checkbox styling */
  form-field[data-type="checkbox"] label,
  .form-checkbox {
    display: flex;
    align-items: flex-start;
    gap: var(--spacing-sm);
    cursor: pointer;
  }

  form-field[data-type="checkbox"] input[type="checkbox"],
  .form-checkbox input[type="checkbox"] {
    width: 1.25rem;
    height: 1.25rem;
    margin: 0;
    accent-color: var(--primary);
    cursor: pointer;
    flex-shrink: 0;
  }

  /* Radio styling */
  form-field[data-type="radio"] label {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    cursor: pointer;
  }

  form-field[data-type="radio"] input[type="radio"] {
    width: 1.25rem;
    height: 1.25rem;
    margin: 0;
    accent-color: var(--primary);
    cursor: pointer;
  }

  /* Textarea */
  form-field textarea,
  .form-textarea {
    min-height: 6rem;
    resize: vertical;
  }

  /* Select */
  form-field select,
  .form-select {
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%2364748b' stroke-width='2'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right var(--spacing-sm) center;
    padding-right: var(--spacing-xl);
  }

  /* --------------------------------------------
     Tooltip (using Popover API)
     Usage: <button popovertarget="tip-1">
     -------------------------------------------- */
  tooltip-wrapper {
    position: relative;
    display: inline-block;
  }

  [data-tooltip] {
    position: fixed;
    margin: 0;
    padding: var(--spacing-sm) var(--spacing-md);
    font-size: var(--font-size-xs);
    color: var(--text-inverted);
    background: var(--text);
    border: none;
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-md);
    max-width: 20rem;
    z-index: 1000;

    &::backdrop {
      background: transparent;
    }
  }

  /* --------------------------------------------
     Meter Component
     Usage: <meter-display>
     -------------------------------------------- */
  meter-display {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
  }

  meter-display label {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--text);
  }

  meter-display meter {
    width: 100%;
    height: 0.5rem;
    border: none;
    border-radius: var(--radius-full);
    background: var(--surface-alt);

    &::-webkit-meter-bar {
      background: var(--surface-alt);
      border-radius: var(--radius-full);
      border: none;
    }

    &::-webkit-meter-optimum-value {
      background: var(--success);
      border-radius: var(--radius-full);
    }

    &::-webkit-meter-suboptimum-value {
      background: var(--warning);
      border-radius: var(--radius-full);
    }

    &::-webkit-meter-even-less-good-value {
      background: var(--error);
      border-radius: var(--radius-full);
    }

    &::-moz-meter-bar {
      border-radius: var(--radius-full);
    }
  }

  meter-display [data-value] {
    font-size: var(--font-size-sm);
    color: var(--text-muted);
  }

  /* Meter sizes */
  meter-display[data-size="small"] meter {
    height: 0.25rem;
  }

  meter-display[data-size="large"] meter {
    height: 0.75rem;
  }

  /* --------------------------------------------
     File Upload Component
     Usage: <form-field data-type="file">
     -------------------------------------------- */
  [data-type="file"] [data-file-input] {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
  }

  [data-type="file"] [data-file-input] input[type="file"] {
    position: absolute;
    width: 0;
    height: 0;
    opacity: 0;
    overflow: hidden;
  }

  [data-type="file"] [data-file-name] {
    font-size: var(--font-size-sm);
    color: var(--text-muted);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  [data-type="file"] [data-hint] {
    font-size: var(--font-size-xs);
    color: var(--text-muted);
  }

  /* Dropzone */
  [data-dropzone] {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: var(--spacing-xl);
    border: 2px dashed var(--border);
    border-radius: var(--radius-lg);
    background: var(--surface);
    cursor: pointer;
    transition: border-color var(--transition-fast), background var(--transition-fast);

    &:hover,
    &[data-dragover] {
      border-color: var(--primary);
      background: oklch(from var(--primary) l c h / 0.05);
    }
  }

  [data-dropzone] input[type="file"] {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    cursor: pointer;
  }

  [data-dropzone] [data-dropzone-content] {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    pointer-events: none;
  }

  [data-dropzone][data-style="compact"] {
    flex-direction: row;
    gap: var(--spacing-sm);
    padding: var(--spacing-md);
  }

  [data-dropzone][data-style="compact"] [data-dropzone-content] {
    flex-direction: row;
  }

  /* File list */
  [data-file-list] {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
  }

  [data-file-item] {
    padding: var(--spacing-md);
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
  }
}

/* ============================================
   Demo Page Styles
   ============================================ */
main.demo-page {
  max-width: 64rem;
  margin: 0 auto;
  padding: var(--spacing-xl);
  font-family: var(--font-family);
}

.demo-section {
  margin-bottom: var(--spacing-2xl);
  padding-bottom: var(--spacing-2xl);
  border-bottom: 1px solid var(--border);

  &:last-child {
    border-bottom: none;
  }
}

.demo-section h2 {
  margin: 0 0 var(--spacing-md);
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-semibold);
}

.demo-section h3 {
  margin: var(--spacing-lg) 0 var(--spacing-sm);
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
  color: var(--text-muted);
}

/* List reset for demo containers */
.demo-row,
.demo-grid,
.demo-card > menu,
.demo-card > ul,
menu.demo-card,
ul.demo-grid,
.icon-grid,
.icon-showcase,
.footer-link-list,
layout-row,
layout-grid {
  list-style: none;
  padding: 0;
  margin: 0;
}

/* Footer link list - vertical stacked links */
.footer-link-list {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-sm);
}

/* Layout Row - Flexbox row container */
layout-row,
.demo-row {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: var(--spacing-md);
  margin-bottom: var(--spacing-md);
}

layout-row[data-gap="sm"] { gap: var(--spacing-sm); }
layout-row[data-gap="lg"] { gap: var(--spacing-lg); }
layout-row[data-gap="xl"] { gap: var(--spacing-xl); }
layout-row[data-align="start"] { align-items: flex-start; }
layout-row[data-align="end"] { align-items: flex-end; }
layout-row[data-align="stretch"] { align-items: stretch; }

/* Layout Grid - CSS Grid container */
layout-grid,
.demo-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(12rem, 1fr));
  gap: var(--spacing-md);
}

layout-grid[data-columns="2"] { grid-template-columns: repeat(2, 1fr); }
layout-grid[data-columns="3"] { grid-template-columns: repeat(3, 1fr); }
layout-grid[data-columns="4"] { grid-template-columns: repeat(4, 1fr); }
layout-grid[data-gap="sm"] { gap: var(--spacing-sm); }
layout-grid[data-gap="lg"] { gap: var(--spacing-lg); }
layout-grid[data-gap="xl"] { gap: var(--spacing-xl); }

.demo-card {
  padding: var(--spacing-lg);
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
}

code {
  font-family: ui-monospace, monospace;
  font-size: 0.875em;
  padding: 0.1em 0.3em;
  background: var(--surface-alt);
  border-radius: var(--radius-sm);
}

/* Table wrapper - block display for custom element */
table-wrapper {
  display: block;
}

/* Demo table styles */
.demo-table {
  width: 100%;
  border-collapse: collapse;
  text-align: left;
}

.demo-table thead tr {
  border-bottom: 1px solid var(--border);
}

.demo-table th,
.demo-table td {
  padding: 0.75rem 0;
}

.demo-table tbody tr {
  border-bottom: 1px solid var(--border);
}

.demo-table tbody tr:last-child {
  border-bottom: none;
}

/* Card header with badge */
.demo-card-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: var(--spacing-sm);
}

/* Text utility classes */
.text-muted {
  color: var(--text-muted);
}

.text-sm {
  font-size: var(--font-size-sm);
}

.mb-0 {
  margin-bottom: 0;
}

.mb-sm {
  margin-bottom: var(--spacing-sm);
}

.mb-md {
  margin-bottom: var(--spacing-md);
}

/* Flexbox utilities */
.flex {
  display: flex;
}

.flex-col {
  flex-direction: column;
}

.gap-sm {
  gap: var(--spacing-sm);
}

.gap-md {
  gap: var(--spacing-md);
}

.gap-lg {
  gap: var(--spacing-lg);
}

.gap-xl {
  gap: var(--spacing-xl);
}

/* Demo-specific nav */
.demo-nav {
  display: flex;
  gap: var(--spacing-lg);
}

/* Demo footer inverted */
.demo-footer-dark {
  background: var(--text);
  color: var(--text-inverted);
}

.demo-footer-dark a {
  color: oklch(0.7 0 0);
  text-decoration: none;
}

.demo-footer-dark a:hover {
  text-decoration: underline;
}

/* Avatar stack - overlapping avatars */
avatar-stack {
  display: flex;
}

avatar-stack user-avatar {
  border: 2px solid var(--surface);
}

avatar-stack user-avatar:not(:first-child) {
  margin-left: -0.75rem;
}

avatar-stack [data-count] {
  background: var(--surface-alt);
  color: var(--text-muted);
  font-size: var(--font-size-xs);
}

/* User list item */
.user-list-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.user-list-item-info {
  display: flex;
  flex-direction: column;
}

.user-list-item-name {
  font-weight: var(--font-weight-medium);
}

.user-list-item-role {
  font-size: var(--font-size-sm);
  color: var(--text-muted);
}

/* Comment thread */
.comment {
  display: flex;
  gap: 0.75rem;
}

.comment-content {
  display: flex;
  flex-direction: column;
}

.comment-header {
  font-size: var(--font-size-sm);
}

.comment-meta {
  color: var(--text-muted);
}

.comment-body {
  margin: var(--spacing-xs) 0 0;
  font-size: var(--font-size-sm);
}

/* Avatar color variants */
user-avatar[data-color="green"] {
  background: oklch(0.6 0.15 145);
}

user-avatar[data-color="blue"] {
  background: oklch(0.55 0.2 250);
}

user-avatar[data-color="yellow"] {
  background: oklch(0.75 0.15 85);
}

user-avatar[data-color="red"] {
  background: oklch(0.55 0.2 25);
}

user-avatar[data-color="purple"] {
  background: oklch(0.6 0.15 300);
}

/* Icon showcase */
.icon-showcase {
  display: flex;
  flex-wrap: wrap;
  align-items: flex-end;
  gap: var(--spacing-lg);
}

.icon-showcase-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.icon-showcase-label {
  font-size: var(--font-size-xs);
  color: var(--text-muted);
  margin-top: var(--spacing-xs);
}

/* Semantic color utilities */
.color-success {
  color: var(--success);
}

.color-error {
  color: var(--error);
}

.color-warning {
  color: var(--warning);
}

.color-info {
  color: var(--info);
}
